<!DOCTYPE html>
<html lang="pt-br">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Categoria Financeiro</title>
   <link rel="stylesheet" href="style.css">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/2.3.4/jspdf.plugin.autotable.min.js"></script>
</head>

<body>
   <div>
      <header class="o-cabecalho">
         <a href="index.html"><img src="img/1 (1).png" alt="imagem_logo"></a>
   </div>

   <div class="texto-modalidade">
      <h2 class="textcard">Financeiro</h2>
      <h3 class="textcard">Recibo de Pagamento</h3>
   </div>

   <div class="forms1">
      <div class="forms2">
         <form class="row g-3">

            <div class="col-md-4">
               <label class="form-label">Vendedor</label><br>
               <input type="text" class="form-control" name="vendedor" id="vendedor">
            </div>

            <div class="col-md-4">
               <label class="form-label">CPF do Vendedor</label><br>
               <input type="text" class="form-control" name="cpfvendedor" id="cpfvendedo">
            </div>

            <div class="col-md-4">
               <label class="form-label">Cliente</label><br>
               <input type="text" class="form-control" name="cliente" id="cliente">
            </div>

            <div class="col-md-4">
               <label class="form-label">CPF do Cliente</label><br>
               <input type="text" class="form-control" name="cpfcliente" id="cpfcliente">
            </div>

            <div class="col-md-4">
               <label class="form-label">Valor do recibo</label><br>
               <input type="number" class="form-control" name="rs" id="rs">
            </div>

            <div class="col-md-4">
               <label class="form-label">Valor por extenso</label><br>
               <input type="text" class="form-control" name="rs_puro" id="rs_puro">
            </div>

            <div class="col-md-4">
               <label class="form-label">Serviço</label><br>
               <input type="text" class="form-control" name="servico" id="servico">
            </div>

            <div class="col-md-4">
               <label class="form-label">Local</label><br>
               <input type="text" class="form-control" name="local" id="local">
            </div>

            <div class="col-md-4">
               <label class="form-label">Data</label><br>
               <input type="text" class="form-control" name="data" id="data">
            </div>

            <div class="col-md-12">
               <button class="btn btn-light btn-pdf" id="getPDF">Gerar Documento</button>
            </div>

         </form>

      </div>
   </div>

   <br>
   <p class="resultado">
      Recibo de Pagamento<br><br>

      Eu <a id="res_vendedor"></a> portador(a) do CPF <a id="res_cpfvendedor"></a> declaro que recebi do Sr(a).
      <a id="res_cliente"></a> brasileiro(a) cujo CPF é <a id="res_cpfcliente"></a>, a quantia de R$ <a id="res_rs"></a>
      (<a id="res_rs_puro"></a>),
      referente a: <a id="res_servico"></a>, dando-lhe por este recibo a devida quitação.

      <br><br>

      Local e Data: <a id="res_local"></a>, <a id="res_data"></a>.
   </p>
   <br><br>

   <script>
      $('.forms2 input[name]').each(function () {
         let input = $(this)

         $(this).on('input', function () {
            let name = input.attr('name')

            let target = $('#res_' + name)

            let value = input.val()

            if (input.attr('type') == 'number')
               value = value.replace('.', ',');

            target.text(value)
         })
      })

      function getPDF() {
         var doc = new jsPDF();

         var specialElementHandlers = {
            '#getPDF': function (element, renderer) {
               return true;
            },
            'br': function (element, renderer) {
               return true;
            }
         };

         doc.fromHTML($('p.resultado').get(0), 15, 15, {
            'width': 170,
            'elementHandlers': specialElementHandlers
         });

         doc.save('Generated.pdf');
      }
   </script>

   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous">
      </script>
</body>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
   integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
   integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
   integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
   integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
   crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>

   $(document).ready(function () {
      $(".btn-pdf").click(function () {
         let vendedor = $("#vendedor").val();
         let cpfvendedo = $("#cpfvendedo").val();
         let cliente = $("#cliente").val();
         let cpfcliente = $("#cpfcliente").val();
         let rs = $("#rs").val();
         let rs_puro = $("#rs_puro").val();
         let servico = $("#servico").val();
         let local = $("#local").val();
         let data = $("#data").val();

         if (vendedor !== '' && cpfvendedo != '' && cliente != '' && cpfcliente != '' && rs != '' && rs_puro != '' && servico != '' && local !== '' && data != '') {
            $("#form_vendedor").text($("#vendedor").val());
            $("#form_cpfvendedo").text($("#cpfvendedo").val());
            $("#form_cliente").text($("#cliente").val());
            $("#form_cpfcliente").text($("#cpfcliente").val());
            $("#form_rs").text($("#rs").val());
            $("#form_rs_puro").text($("#rs_puro").val());
            $("#form_servico").text($("#servico").val());
            $("#form_local").text($("#local").val());
            $("#form_data").text($("#data").val());
         }
         else {
            alert("Ops! Algum campo ficou em branco! Preencha todo o formulário.")
         }
      });

      $(".btn-pdf").click(function () {
         var element = document.getElementById('forms1');
         var opt = {
            margin: 1,
            filename: 'contratofianca.pdf',
            image: { type: 'jpeg', quality: 0.98 },
            html2canvas: { scale: 2 },
            jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
         };

         // New Promise-based usage:
         html2pdf().set(opt).from(element).save();

         // Old monolithic-style usage:
         html2pdf(element, opt);
      })
   });

</script>

</html>
