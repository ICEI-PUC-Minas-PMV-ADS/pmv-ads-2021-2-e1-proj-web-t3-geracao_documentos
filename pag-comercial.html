<!DOCTYPE html>
<html lang="pt-br">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Categoria Comercial</title>
   <link rel="stylesheet" href="style.css">
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.4.1/jspdf.debug.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/2.3.4/jspdf.plugin.autotable.min.js"></script>
</head>

<body>

   <div>
      <header class="o-cabecalho">
         <a href="index.html"><img src="img/1 (1).png" alt="imagem_logo"></a>
   </div>

   <nav aria-label="breadcrumb">
      <ol class="breadcrumb">
         <li class="breadcrumb-item"><a href="pagina-categorias.html">Categorias</a></li>
         <li class="breadcrumb-item active" aria-current="page">Comercial</li>
      </ol>
   </nav>

   <div class="barra-de-pesquisa">
      <h2>Comercial</h2>

   </div>

   <div class="texto-modalidade">

      <h3 class="tit-doc">Fatura</h3>
   </div>

   <div class="forms1">
      <div class="forms2">
         <div class="row g-3">

            <div class="col-md-4">
               <label class="form-label">Empresa</label><br>
               <input type="text" class="form-control" name="empresa" id="empresa" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">CNPJ da empresa</label><br>
               <input type="text" class="form-control" name="cnpjdaempresa" id="cnpjdaempresa" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">Endereço da empresa</label><br>
               <input type="text" class="form-control" name="enderecoEmpresa" id="enderecoEmpresa" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">Telefone da empresa</label><br>
               <input type="text" class="form-control" name="telefoneEmpresa" id="telefoneEmpresa" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">Email da empresa</label><br>
               <input type="text" class="form-control" name="emailEmpresa" id="emailEmpresa" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">Pagador</label><br>
               <input type="text" class="form-control" name="pagador" id="pagador" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">CPF/CNPJ do pagador</label><br>
               <input type="text" class="form-control" name="cpfCnpjDoPagador" id="cpfCnpjDoPagador" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">Endereço do pagador</label><br>
               <input type="text" class="form-control" name="enderecoDoPagador" id="enderecoDoPagador" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">Email do pagador</label><br>
               <input type="text" class="form-control" name="emailPagador" id="emailPagador" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">Valor total</label><br>
               <input type="text" class="form-control" name="valor" id="valor" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">Descrição</label><br>
               <input type="text" class="form-control" name="descricao" id="descricao" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">Data de vencimento</label><br>
               <input type="text" class="form-control" name="vencimento" id="vencimento" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">Data de emissão</label><br>
               <input type="text" class="form-control" name="data" id="data" required>
            </div>

            <div class="col-md-4">
               <label class="form-label">Código da fatura</label><br>
               <input type="text" class="form-control" name="codigoFatura" id="codigoFatura" required>
            </div>

            <div class="col-md-12">
               <button class="btn btn-light btn-pdf" id="getPDF">Gerar Documento</button>
            </div>
         </div>
      </div>
   </div>


   <div class="resultado" id="resultado">

      <h3>Fatura</h3>
      <br>

      <p id="texto-doc2">A empresa <a id="res_empresa"></a>, CNPJ<a id="res_cnpjdaempresa"></a>, localizada no endereço <a id="res_enderecoEmpresa"></a>, vem por meio desta nota outorgar a fatura para: <a id="res_pagador"></a>, possuinte do CPF/CNPJ <a id="res_cpfCnpjDoPagador"></a> no valor de R$ <a id="res_valor"></a>, emitida no dia <a id="res_data"></a> com vencimento em <a id="res_vencimento"></a>.

         <br>
         <br>
         Para mais informações, entre em contato conosco no telefone <a id="res_telefoneEmpresa"></a>.
         <br>
         <br>
         Endereço de email: <a id="res_emailEmpresa"></a>.
         <br>
         <br>
         Descrição da fatura: <a id="res_descricao"></a>
         <br>
         <br>
         Código da fatura: <a id="res_codigoFatura"></a>
         <br>
         <br>
         Efetue o pagamento nas datas combinadas para evitar aplicações de juros.
      </p>

   </div>
   <br>

   <script>
      $('.forms2 input[name]').each(function () {
         let input = $(this)

         $(this).on('input', function () {
            let name = input.attr('name')

            let target = $('#res_' + name)

            let value = input.val()

            if (input.attr('type') == 'number')
               value = value.replace('.', ',');

            target.text(value)
         })
      })

      function getPDF() {
         var doc = new jsPDF();

         var specialElementHandlers = {
            '#getPDF': function (element, renderer) {
               return true;
            },
            'br': function (element, renderer) {
               return true;
            }
         };

         doc.fromHTML($('p.resultado').get(0), 15, 15, {
            'width': 170,
            'elementHandlers': specialElementHandlers
         });

         doc.save('Generated.pdf');
      }
   </script>

   <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"></script>
</body>

<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
   integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
   integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-3.6.0.slim.min.js"
   integrity="sha256-u7e5khyithlIdTpu22PHhENmPcRdFiHRjhAuHcs05RI=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"
   integrity="sha512-GsLlZN/3F2ErC5ifS5QtgpiJtWd43JWSuIgh7mbzZ8zBps+dvLusV+eNQATqgA/HdeKFVgA5v3S/cIrLF7QnIg=="
   crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>

$(document).ready(function () {
   $(".btn-pdf").click(function () {
      let empresa = $("#empresa").val();
      let cnpjdaEmpresa = $("#cnpjdaempresa").val();
      let enderecoEmpresa = $("#enderecoEmpresa").val();
      let telefoneEmpresa = $("#telefoneEmpresa").val();
      let emailEmpresa = $("#emailEmpresa").val();
      let pagador = $("#pagador").val();
      let cpfCnpjDoPagador = $("#cpfCnpjDoPagador").val();
      let enderecoDoPagador = $("#enderecoDoPagador").val();
      let emailPagador = $("#emailPagador").val();
      let valor = $("#valor").val();
      let descricao = $("#descricao").val();
      let vencimento = $("#vencimento").val();
      let data = $("#data").val();
      let codigoFatura = $("#codigoFatura").val();

      if (empresa !== '' && cnpjdaempresa != '' && enderecoEmpresa != '' && telefoneEmpresa != '' && emailEmpresa != '' && pagador != '' && cpfCnpjDoPagador != '' && enderecoDoPagador !== '' && emailPagador != '' && valor != '' && descricao != '' && vencimento != '' && data != '' && codigoFatura != '') {
         $("#form_empresa").text($("#empresa").val());
         $("#form_cnpjdaempresa").text($("#cnpjdaempresa").val());
         $("#form_enderecoEmpresa").text($("#enderecoEmpresa").val());
         $("#form_telefoneEmpresa").number($("#telefoneEmpresa").val());
         $("#form_emailEmpresa").text($("#emailEmpresa").val());
         $("#form_pagador").text($("#pagador").val());
         $("#form_cpfCnpjDoPagador").number($("#cpfCnpjDoPagador").val());
         $("#form_enderecoDoPagador").text($("#enderecoDoPagador").val());
         $("#form_emailPagador").text($("#emailPagador").val());
         $("#form_valor").number($("#valor").val());
         $("#form_descricao").text($("#descricao").val());
         $("#form_vencimento").number($("#vencimento").val());
         $("#form_data").text($("#data").val());
         $("#form_codigoFatura").text($("#codigoFatura").val());

         var html = document.getElementById('resultado').innerHTML;
         var divContents = $("#dvContainer").html()
         var win = window.open('', 'Contrato', 'height=400,width=800')
         win.document.write('<html><head>')
         win.document.write('<link rel="stylesheet" href="style.css"></head>')
         win.document.write('<body class="print" onload="print()"><div style="height:400px;">')
         win.document.write(html)
         win.document.write('</div>')
         win.document.write('</body></html>')
         win.document.close()
      }
      else {
         alert("Ops! Algum campo ficou em branco! Preencha todo o formulário.")
      }
   })
});
</script>

</html>
